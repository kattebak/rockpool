{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.235.1"},"children":{"mvhenten-BookstoreStack":{"id":"mvhenten-BookstoreStack","path":"mvhenten-BookstoreStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.235.1"},"children":{"Table":{"id":"Table","path":"mvhenten-BookstoreStack/Table","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableV2","version":"2.235.1","metadata":[{"kinesisStream":"*","tableName":"*","partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"dynamoStream":"NEW_AND_OLD_IMAGES","billing":"*","removalPolicy":"retain","pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true}},{"addGlobalSecondaryIndex":[{"partitionKey":{"name":"*","type":"S"},"indexName":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/Table/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnGlobalTable","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::GlobalTable","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"pk","attributeType":"S"},{"attributeName":"sk","attributeType":"S"},{"attributeName":"gsi0pk","attributeType":"S"},{"attributeName":"gsi0sk","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi0","keySchema":[{"attributeName":"gsi0pk","keyType":"HASH"},{"attributeName":"gsi0sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"pk","keyType":"HASH"},{"attributeName":"sk","keyType":"RANGE"}],"replicas":[{"region":"eu-central-1","globalSecondaryIndexes":[{"indexName":"gsi0"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true}}],"streamSpecification":{"streamViewType":"NEW_AND_OLD_IMAGES"},"tableName":"mvhenten-bookstore"}}}}},"UserPool":{"id":"UserPool","path":"mvhenten-BookstoreStack/UserPool","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"UserPool":{"id":"UserPool","path":"mvhenten-BookstoreStack/UserPool/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.235.1","metadata":[{"userPoolName":"*","selfSignUpEnabled":true,"signInAliases":{"email":true},"autoVerify":{"email":true},"removalPolicy":"destroy"}]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/UserPool/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"mvhenten-bookstore-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"CognitoDomain":{"id":"CognitoDomain","path":"mvhenten-BookstoreStack/UserPool/UserPool/CognitoDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.235.1","metadata":[{"userPool":"*","cognitoDomain":{"domainPrefix":"*"}}]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/UserPool/UserPool/CognitoDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"mvhenten-bookstore","userPoolId":{"Ref":"UserPool6D0DFADB"}}}}}},"WebClient":{"id":"WebClient","path":"mvhenten-BookstoreStack/UserPool/UserPool/WebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.235.1","metadata":[{"userPool":"*","userPoolClientName":"*","oAuth":{"flows":{"authorizationCodeGrant":true},"scopes":"*","callbackUrls":"*","logoutUrls":"*"},"supportedIdentityProviders":"*"}]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/UserPool/UserPool/WebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["openid","email","profile"],"callbackUrLs":["http://localhost:3000/callback"],"clientName":"webClient","logoutUrLs":["http://localhost:3000/logout"],"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"UserPool6D0DFADB"}}}}}}}}}},"Handler":{"id":"Handler","path":"mvhenten-BookstoreStack/Handler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.235.1","metadata":[{"functionName":"*","handler":"*","memorySize":"*","runtime":"*","architecture":"*","timeout":"*","loggingFormat":"JSON","tracing":"Active","code":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"mvhenten-BookstoreStack/Handler/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"mvhenten-BookstoreStack/Handler/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":["*"]}},"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/Handler/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"mvhenten-BookstoreStack/Handler/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/Handler/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["TableCD117FA1","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["TableCD117FA1","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"HandlerServiceRoleDefaultPolicyCBD0CC91","roles":[{"Ref":"HandlerServiceRoleFCDC14AE"}]}}}}}}},"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/Handler/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["arm64"],"code":{"zipFile":"exports.handler = async (event, context) => {\n                    console.error({event, context, level: 50, message: \"No code provided\", timestamp: new Date().toISOString()});\n                    throw new Error(\"No code provided\");\n\n            }"},"environment":{"variables":{"NODE_OPTIONS":"--enable-source-maps","NODE_ENV":"production","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1","DYNAMODB_TABLE_NAME":{"Ref":"TableCD117FA1"},"USERNAME":"mvhenten"}},"functionName":"mvhenten-bookstore-backend","handler":"index.handler","loggingConfig":{"logFormat":"JSON"},"memorySize":2048,"role":{"Fn::GetAtt":["HandlerServiceRoleFCDC14AE","Arn"]},"runtime":"nodejs22.x","timeout":10,"tracingConfig":{"mode":"Active"}}}},"LogGroup":{"id":"LogGroup","path":"mvhenten-BookstoreStack/Handler/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.235.1","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/Handler/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"Handler886CB40B"}]]},"retentionInDays":731}}}}},"PermitAPIGInvocation":{"id":"PermitAPIGInvocation","path":"mvhenten-BookstoreStack/Handler/PermitAPIGInvocation","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["Handler886CB40B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:eu-central-1:",{"Ref":"AWS::AccountId"},":",{"Ref":"APISpecRestApi472D24D6"},"/*/*/*"]]}}}}}},"API":{"id":"API","path":"mvhenten-BookstoreStack/API","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"AccessLogGroup":{"id":"AccessLogGroup","path":"mvhenten-BookstoreStack/API/AccessLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.235.1","metadata":[{"logGroupName":"*","retention":30}]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/API/AccessLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/apigateway/mvhenten-bookstore-api","retentionInDays":30}}}}},"SpecRestApi":{"id":"SpecRestApi","path":"mvhenten-BookstoreStack/API/SpecRestApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.SpecRestApi","version":"2.235.1","metadata":[{"restApiName":"*","apiDefinition":"*","deploy":true,"deployOptions":{"tracingEnabled":true,"accessLogDestination":"*","accessLogFormat":"*"}}]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/API/SpecRestApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"body":{"openapi":"3.0.0","info":{"title":"Bookstore API","version":"0.0.0"},"tags":[],"paths":{"/author/{authorId}":{"get":{"operationId":"AuthorDetailOperations_describeAuthor","parameters":[{"name":"authorId","in":"path","required":true,"schema":{"$ref":"#/components/schemas/UUID"}}],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorWithBookCount"}}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"put":{"operationId":"AuthorDetailOperations_updateAuthor","parameters":[{"name":"authorId","in":"path","required":true,"schema":{"$ref":"#/components/schemas/UUID"}}],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Author"}}}}},"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorUpdateParams"}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"delete":{"operationId":"AuthorDetailOperations_deleteAuthor","parameters":[{"name":"authorId","in":"path","required":true,"schema":{"$ref":"#/components/schemas/UUID"}}],"responses":{"204":{"description":"There is no content to send for this request, but the headers may be useful. "}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"options":{"operationId":"CORS_AuthorDetailOperations_describeAuthor","security":[],"responses":{"204":{"description":"204 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Vary":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"type":"mock","responses":{"default":{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Resource-Path,X-HTTP-Method'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Vary":"'Origin'"},"responseTemplates":{"application/json":"#if($input.params().header.get(\"Origin\") == \"http://localhost:3000\")\n\t#set($context.responseOverride.header.Access-Control-Allow-Origin = \"http://localhost:3000\")\n#end"}}},"requestTemplates":{"application/json":"{ statusCode: 200 }"},"passthroughBehavior":"when_no_match"}}},"/author/{authorId}/books":{"get":{"operationId":"AuthorBooksOperations_listAuthorBooks","parameters":[{"name":"authorId","in":"path","required":true,"schema":{"$ref":"#/components/schemas/UUID"}},{"name":"continuationToken","in":"query","required":false,"schema":{"type":"string"}},{"name":"count","in":"query","required":false,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"type":"object","required":["items"],"properties":{"continuationToken":{"$ref":"#/components/schemas/String800"},"items":{"type":"array","items":{"$ref":"#/components/schemas/Book"}}}}}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"options":{"operationId":"CORS_AuthorBooksOperations_listAuthorBooks","security":[],"responses":{"204":{"description":"204 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Vary":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"type":"mock","responses":{"default":{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Resource-Path,X-HTTP-Method'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Vary":"'Origin'"},"responseTemplates":{"application/json":"#if($input.params().header.get(\"Origin\") == \"http://localhost:3000\")\n\t#set($context.responseOverride.header.Access-Control-Allow-Origin = \"http://localhost:3000\")\n#end"}}},"requestTemplates":{"application/json":"{ statusCode: 200 }"},"passthroughBehavior":"when_no_match"}}},"/authors":{"get":{"operationId":"AuthorOperations_listAuthors","parameters":[{"name":"continuationToken","in":"query","required":false,"schema":{"type":"string"}},{"name":"count","in":"query","required":false,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"type":"object","required":["items"],"properties":{"continuationToken":{"$ref":"#/components/schemas/String800"},"items":{"type":"array","items":{"$ref":"#/components/schemas/AuthorWithBookCount"}}}}}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"post":{"operationId":"AuthorOperations_createAuthor","parameters":[],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Author"}}}}},"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorCreateParams"}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"options":{"operationId":"CORS_AuthorOperations_listAuthors","security":[],"responses":{"204":{"description":"204 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Vary":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"type":"mock","responses":{"default":{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Resource-Path,X-HTTP-Method'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Vary":"'Origin'"},"responseTemplates":{"application/json":"#if($input.params().header.get(\"Origin\") == \"http://localhost:3000\")\n\t#set($context.responseOverride.header.Access-Control-Allow-Origin = \"http://localhost:3000\")\n#end"}}},"requestTemplates":{"application/json":"{ statusCode: 200 }"},"passthroughBehavior":"when_no_match"}}},"/book/{bookId}":{"get":{"operationId":"BookDetailOperations_describeBook","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"$ref":"#/components/schemas/UUID"}}],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DescribeBookResponse"}}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"put":{"operationId":"BookDetailOperations_updateBook","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"$ref":"#/components/schemas/UUID"}}],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Book"}}}}},"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookUpdateParams"}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"delete":{"operationId":"BookDetailOperations_deleteBook","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"$ref":"#/components/schemas/UUID"}}],"responses":{"204":{"description":"There is no content to send for this request, but the headers may be useful. "}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"options":{"operationId":"CORS_BookDetailOperations_describeBook","security":[],"responses":{"204":{"description":"204 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Vary":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"type":"mock","responses":{"default":{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Resource-Path,X-HTTP-Method'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Vary":"'Origin'"},"responseTemplates":{"application/json":"#if($input.params().header.get(\"Origin\") == \"http://localhost:3000\")\n\t#set($context.responseOverride.header.Access-Control-Allow-Origin = \"http://localhost:3000\")\n#end"}}},"requestTemplates":{"application/json":"{ statusCode: 200 }"},"passthroughBehavior":"when_no_match"}}},"/book/{bookId}/publish":{"put":{"operationId":"BookDetailOperations_publishBook","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"$ref":"#/components/schemas/UUID"}}],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Book"}}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"options":{"operationId":"CORS_BookDetailOperations_publishBook","security":[],"responses":{"204":{"description":"204 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Vary":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"type":"mock","responses":{"default":{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Resource-Path,X-HTTP-Method'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Vary":"'Origin'"},"responseTemplates":{"application/json":"#if($input.params().header.get(\"Origin\") == \"http://localhost:3000\")\n\t#set($context.responseOverride.header.Access-Control-Allow-Origin = \"http://localhost:3000\")\n#end"}}},"requestTemplates":{"application/json":"{ statusCode: 200 }"},"passthroughBehavior":"when_no_match"}}},"/book/{bookId}/unpublish":{"put":{"operationId":"BookDetailOperations_unpublishBook","parameters":[{"name":"bookId","in":"path","required":true,"schema":{"$ref":"#/components/schemas/UUID"}}],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Book"}}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"options":{"operationId":"CORS_BookDetailOperations_unpublishBook","security":[],"responses":{"204":{"description":"204 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Vary":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"type":"mock","responses":{"default":{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Resource-Path,X-HTTP-Method'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Vary":"'Origin'"},"responseTemplates":{"application/json":"#if($input.params().header.get(\"Origin\") == \"http://localhost:3000\")\n\t#set($context.responseOverride.header.Access-Control-Allow-Origin = \"http://localhost:3000\")\n#end"}}},"requestTemplates":{"application/json":"{ statusCode: 200 }"},"passthroughBehavior":"when_no_match"}}},"/books":{"get":{"operationId":"BookOperations_listBooks","parameters":[{"name":"continuationToken","in":"query","required":false,"schema":{"type":"string"}},{"name":"count","in":"query","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"status","in":"query","required":false,"schema":{"$ref":"#/components/schemas/BookStatus"}},{"name":"genre","in":"query","required":false,"schema":{"$ref":"#/components/schemas/BookGenre"}}],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"type":"object","required":["items"],"properties":{"continuationToken":{"$ref":"#/components/schemas/String800"},"items":{"type":"array","items":{"$ref":"#/components/schemas/BookWithAuthor"}}}}}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"post":{"operationId":"BookOperations_createBook","parameters":[],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Book"}}}}},"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookCreateParams"}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"options":{"operationId":"CORS_BookOperations_listBooks","security":[],"responses":{"204":{"description":"204 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Vary":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"type":"mock","responses":{"default":{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Resource-Path,X-HTTP-Method'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Vary":"'Origin'"},"responseTemplates":{"application/json":"#if($input.params().header.get(\"Origin\") == \"http://localhost:3000\")\n\t#set($context.responseOverride.header.Access-Control-Allow-Origin = \"http://localhost:3000\")\n#end"}}},"requestTemplates":{"application/json":"{ statusCode: 200 }"},"passthroughBehavior":"when_no_match"}}},"/search/authors":{"get":{"operationId":"SearchOperations_searchAuthors","parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string"}},{"name":"continuationToken","in":"query","required":false,"schema":{"type":"string"}},{"name":"count","in":"query","required":false,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"type":"object","required":["items"],"properties":{"continuationToken":{"$ref":"#/components/schemas/String800"},"items":{"type":"array","items":{"$ref":"#/components/schemas/AuthorWithBookCount"}}}}}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"options":{"operationId":"CORS_SearchOperations_searchAuthors","security":[],"responses":{"204":{"description":"204 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Vary":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"type":"mock","responses":{"default":{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Resource-Path,X-HTTP-Method'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Vary":"'Origin'"},"responseTemplates":{"application/json":"#if($input.params().header.get(\"Origin\") == \"http://localhost:3000\")\n\t#set($context.responseOverride.header.Access-Control-Allow-Origin = \"http://localhost:3000\")\n#end"}}},"requestTemplates":{"application/json":"{ statusCode: 200 }"},"passthroughBehavior":"when_no_match"}}},"/search/books":{"get":{"operationId":"SearchOperations_searchBooks","parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string"}},{"name":"continuationToken","in":"query","required":false,"schema":{"type":"string"}},{"name":"count","in":"query","required":false,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"The request has succeeded.","content":{"application/json":{"schema":{"type":"object","required":["items"],"properties":{"continuationToken":{"$ref":"#/components/schemas/String800"},"items":{"type":"array","items":{"$ref":"#/components/schemas/BookWithAuthor"}}}}}}}},"x-amazon-apigateway-integration":{"type":"aws_proxy","httpMethod":"POST","passthroughBehavior":"when_no_match","uri":{"Fn::Sub":{"Fn::Join":["",["arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:",{"Ref":"Handler886CB40B"},"/invocations"]]}}}},"options":{"operationId":"CORS_SearchOperations_searchBooks","security":[],"responses":{"204":{"description":"204 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Vary":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"type":"mock","responses":{"default":{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Resource-Path,X-HTTP-Method'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Vary":"'Origin'"},"responseTemplates":{"application/json":"#if($input.params().header.get(\"Origin\") == \"http://localhost:3000\")\n\t#set($context.responseOverride.header.Access-Control-Allow-Origin = \"http://localhost:3000\")\n#end"}}},"requestTemplates":{"application/json":"{ statusCode: 200 }"},"passthroughBehavior":"when_no_match"}}}},"security":[{"CognitoAuthorizer":[]}],"components":{"schemas":{"Author":{"type":"object","required":["authorId","name","createdAt","updatedAt"],"properties":{"authorId":{"allOf":[{"$ref":"#/components/schemas/UUID"}],"readOnly":true},"name":{"$ref":"#/components/schemas/DisplayName"},"biography":{"$ref":"#/components/schemas/String800"},"email":{"$ref":"#/components/schemas/Email"},"website":{"$ref":"#/components/schemas/URL"},"createdAt":{"type":"integer","format":"int64","readOnly":true},"updatedAt":{"type":"integer","format":"int64","readOnly":true}}},"AuthorCreateParams":{"type":"object","required":["name"],"properties":{"name":{"$ref":"#/components/schemas/DisplayName"},"biography":{"$ref":"#/components/schemas/String800"},"email":{"$ref":"#/components/schemas/Email"},"website":{"$ref":"#/components/schemas/URL"}},"description":""},"AuthorUpdateParams":{"type":"object","properties":{"biography":{"$ref":"#/components/schemas/String800"},"email":{"$ref":"#/components/schemas/Email"},"website":{"$ref":"#/components/schemas/URL"}},"description":""},"AuthorWithBookCount":{"type":"object","properties":{"bookCount":{"type":"integer","format":"int32","readOnly":true}},"allOf":[{"$ref":"#/components/schemas/Author"}]},"Book":{"type":"object","required":["bookId","authorId","title","createdAt","updatedAt"],"properties":{"bookId":{"allOf":[{"$ref":"#/components/schemas/UUID"}],"readOnly":true},"authorId":{"$ref":"#/components/schemas/UUID"},"title":{"$ref":"#/components/schemas/String200"},"isbn":{"$ref":"#/components/schemas/ISBN"},"description":{"$ref":"#/components/schemas/String800"},"genre":{"$ref":"#/components/schemas/BookGenre"},"status":{"allOf":[{"$ref":"#/components/schemas/BookStatus"}],"default":"Draft"},"price":{"type":"integer","format":"int32","description":"Price in cents"},"pageCount":{"type":"integer","format":"int32","description":"Number of pages"},"publishedAt":{"type":"integer","format":"int64"},"coverImageUrl":{"$ref":"#/components/schemas/URL"},"createdAt":{"type":"integer","format":"int64","readOnly":true},"updatedAt":{"type":"integer","format":"int64","readOnly":true}}},"BookCreateParams":{"type":"object","required":["authorId","title"],"properties":{"authorId":{"$ref":"#/components/schemas/UUID"},"title":{"$ref":"#/components/schemas/String200"},"isbn":{"$ref":"#/components/schemas/ISBN"},"description":{"$ref":"#/components/schemas/String800"},"genre":{"$ref":"#/components/schemas/BookGenre"},"status":{"allOf":[{"$ref":"#/components/schemas/BookStatus"}],"default":"Draft"},"price":{"type":"integer","format":"int32","description":"Price in cents"},"pageCount":{"type":"integer","format":"int32","description":"Number of pages"},"coverImageUrl":{"$ref":"#/components/schemas/URL"}},"description":""},"BookGenre":{"type":"string","enum":["Fiction","NonFiction","Mystery","ScienceFiction","Fantasy","Romance","Thriller","Horror","Biography","History","Science","SelfHelp","Cooking","Travel","Children"]},"BookStatus":{"type":"string","enum":["Draft","Published","OutOfPrint","Discontinued"]},"BookUpdateParams":{"type":"object","properties":{"description":{"$ref":"#/components/schemas/String800"},"genre":{"$ref":"#/components/schemas/BookGenre"},"status":{"allOf":[{"$ref":"#/components/schemas/BookStatus"}],"default":"Draft"},"price":{"type":"integer","format":"int32","description":"Price in cents"},"pageCount":{"type":"integer","format":"int32","description":"Number of pages"},"publishedAt":{"type":"integer","format":"int64"},"coverImageUrl":{"$ref":"#/components/schemas/URL"}},"description":""},"BookWithAuthor":{"type":"object","properties":{"author":{"allOf":[{"$ref":"#/components/schemas/Author"}],"readOnly":true}},"allOf":[{"$ref":"#/components/schemas/Book"}]},"DescribeBookResponse":{"type":"object","required":["book","author"],"properties":{"book":{"$ref":"#/components/schemas/Book"},"author":{"$ref":"#/components/schemas/Author"}}},"DisplayName":{"type":"string","minLength":3,"maxLength":48},"Email":{"type":"string","maxLength":200,"format":"email"},"ISBN":{"type":"string","minLength":10,"maxLength":13},"String200":{"type":"string","maxLength":200},"String800":{"type":"string","maxLength":800},"URL":{"type":"string","maxLength":400,"format":"uri"},"UUID":{"type":"string","minLength":25,"maxLength":25}},"securitySchemes":{"CognitoAuthorizer":{"type":"apiKey","in":"header","name":"Authorization","x-amazon-apigateway-authorizer":{"type":"cognito_user_pools","providerARNs":[{"Fn::GetAtt":["UserPool6D0DFADB","Arn"]}]},"x-amazon-apigateway-authtype":"cognito_user_pools"}}},"servers":[{"url":"https://api.example.com/","description":"Example base URL","variables":{}}]},"name":"mvhenten-bookstore-api"}}},"Default":{"id":"Default","path":"mvhenten-BookstoreStack/API/SpecRestApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.235.1","metadata":["*"]}},"Deployment":{"id":"Deployment","path":"mvhenten-BookstoreStack/API/SpecRestApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.235.1","metadata":[{"description":"*","api":"*","retainDeployments":"*"}]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/API/SpecRestApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"APISpecRestApi472D24D6"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"mvhenten-BookstoreStack/API/SpecRestApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.235.1","metadata":[{"deployment":"*","tracingEnabled":true,"accessLogDestination":"*","accessLogFormat":"*"}]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/API/SpecRestApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"accessLogSetting":{"destinationArn":{"Fn::GetAtt":["APIAccessLogGroup3D4DDD1C","Arn"]},"format":"{\"requestId\":\"$context.requestId\",\"requestTime\":\"$context.requestTime\",\"requestTimeEpoch\":\"$context.requestTimeEpoch\",\"httpMethod\":\"$context.httpMethod\",\"path\":\"$context.path\",\"resourcePath\":\"$context.resourcePath\",\"stage\":\"$context.stage\",\"status\":\"$context.status\",\"protocol\":\"$context.protocol\",\"responseLength\":\"$context.responseLength\",\"responseLatency\":\"$context.responseLatency\",\"integrationLatency\":\"$context.integration.latency\",\"integrationStatus\":\"$context.integration.status\",\"sourceIp\":\"$context.identity.sourceIp\",\"userAgent\":\"$context.identity.userAgent\",\"username\":\"$context.authorizer.claims['cognito:username']\",\"userSub\":\"$context.authorizer.claims.sub\",\"error\":{\"message\":\"$context.error.message\",\"messageString\":\"$context.error.messageString\"}}"},"deploymentId":{"Ref":"APISpecRestApiDeploymentB9D21DBC237a300ae253ada39ea374ca1bae7ccd"},"restApiId":{"Ref":"APISpecRestApi472D24D6"},"stageName":"prod","tracingEnabled":true}}}}},"Endpoint":{"id":"Endpoint","path":"mvhenten-BookstoreStack/API/SpecRestApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}}}}}},"WebsiteBucket":{"id":"WebsiteBucket","path":"mvhenten-BookstoreStack/WebsiteBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.235.1","metadata":[{"bucketName":"*","removalPolicy":"destroy","autoDeleteObjects":true,"blockPublicAccess":"*","enforceSSL":true}]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/WebsiteBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":"mvhenten-bookstore-frontend","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"mvhenten-BookstoreStack/WebsiteBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.235.1","metadata":[{"bucket":"*"}]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/WebsiteBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WebsiteBucket75C24D94"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}]},{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["OAIE1EFC67F","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"mvhenten-BookstoreStack/WebsiteBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.235.1","metadata":["*"]},"children":{"Default":{"id":"Default","path":"mvhenten-BookstoreStack/WebsiteBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"mvhenten-BookstoreStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.235.1"},"children":{"Staging":{"id":"Staging","path":"mvhenten-BookstoreStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"Role":{"id":"Role","path":"mvhenten-BookstoreStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}},"Handler":{"id":"Handler","path":"mvhenten-BookstoreStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}}}},"OAI":{"id":"OAI","path":"mvhenten-BookstoreStack/OAI","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.235.1","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/OAI/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Allows CloudFront to reach the bucket"}}}}}},"Distribution":{"id":"Distribution","path":"mvhenten-BookstoreStack/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.235.1","metadata":[{"defaultRootObject":"*","errorResponses":[{"httpStatus":"*","responseHttpStatus":"*","responsePagePath":"*","ttl":"*"}],"defaultBehavior":{"origin":"*","compress":true,"allowedMethods":"*","viewerProtocolPolicy":"redirect-to-https"}}]},"children":{"Origin1":{"id":"Origin1","path":"mvhenten-BookstoreStack/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"Resource":{"id":"Resource","path":"mvhenten-BookstoreStack/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["WebsiteBucket75C24D94","RegionalDomainName"]},"id":"mvhentenBookstoreStackDistributionOrigin1B44A139E","originPath":"/public","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"OAIE1EFC67F"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"mvhentenBookstoreStackDistributionOrigin1B44A139E","allowedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"customErrorResponses":[{"errorCachingMinTtl":300,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"mvhenten-BookstoreStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"mvhenten-BookstoreStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"mvhenten-BookstoreStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.235.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"mvhenten-BookstoreStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.235.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}